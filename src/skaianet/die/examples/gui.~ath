
import uncolor bgcolor;
import uncolor bdcolor;
import uncolor fgcolor;
import uncolor iscolor;
import uncolor btcolor;

bgcolor.red = 255;
bgcolor.green = 181;
bgcolor.blue = 0;

bdcolor.red = 255;
bdcolor.green = 247;
bdcolor.blue = 0;

fgcolor.red = 255;
fgcolor.green = 255;
fgcolor.blue = 255;

iscolor.red = 0;
iscolor.green = 0;
iscolor.blue = 0;

btcolor.red = 196;
btcolor.green = 138;
btcolor.blue = 0;

import window TestWindow;
import signalqueue queue;

TestWindow.width = 232;
TestWindow.height = 346;
TestWindow.background = bgcolor.get();
TestWindow.border = bdcolor.get();
TestWindow.borderWidth = 2;
// TestWindow.decorated = false;

import label title;

title.x = 17;
title.y = 1;
title.scale = 2;
title.color = fgcolor.get();
title.text = `~ATHTERCHUM v1';
TestWindow.add(title);

import panel titlepanel;

titlepanel.x = 12;
titlepanel.y = 32;
titlepanel.width = 209;
titlepanel.height = 55;
titlepanel.color = iscolor.get();
titlepanel.border = bdcolor.get();
titlepanel.borderWidth = 2;
TestWindow.add(titlepanel);

import icon heads;
import png pesterheads;

heads.x = 4;
heads.y = 6;
heads.image = pesterheads;
titlepanel.add(heads);

import label chatclient;

chatclient.x = 101;
chatclient.y = 21;
chatclient.color = fgcolor.get();
chatclient.text = `CHAT CLIENT';
titlepanel.add(chatclient);

import label chumroll;

chumroll.x = 19;
chumroll.y = 88;
chumroll.color = iscolor.get();
chumroll.text = `CHUMROLL:';
TestWindow.add(chumroll);

import panel chumpanel;

chumpanel.x = 12;
chumpanel.y = 104;
chumpanel.width = 209;
chumpanel.height = 82;
chumpanel.color = iscolor.get();
chumpanel.border = bdcolor.get();
chumpanel.borderWidth = 2;
TestWindow.add(chumpanel);

import button pester;

pester.x = 77;
pester.y = 189;
pester.width = 71;
pester.shiftX = 1;
pester.background = bdcolor.get();
pester.color = iscolor.get();
pester.border = btcolor.get();
pester.backgroundPressed = btcolor.get();
pester.colorPressed = bdcolor.get();
pester.borderPressed = iscolor.get();
pester.borderWidth = 2;
pester.text = `PESTER!';
pester.queue = queue;
import stream stdout;
U~F pesterevent() {
    stdout.println(`Pestering!');
}
pester.signal = pesterevent;
TestWindow.add(pester);

import label chumhandle;

chumhandle.x = 18;
chumhandle.y = 215;
chumhandle.color = iscolor.get();
chumhandle.text = `MYCHUMHANDLE:';
TestWindow.add(chumhandle);

import panel chumhandlepanel;

chumhandlepanel.x = 12;
chumhandlepanel.y = 231;
chumhandlepanel.width = 209;
chumhandlepanel.height = 24;
chumhandlepanel.color = iscolor.get();
chumhandlepanel.border = bdcolor.get();
chumhandlepanel.borderWidth = 2;
TestWindow.add(chumhandlepanel);

import label moodlabel;

moodlabel.x = 18;
moodlabel.y = 259;
moodlabel.color = iscolor.get();
moodlabel.text = `MOOD:';
TestWindow.add(moodlabel);

moodholder = [`CHUMMY'];

U~F setmood(mood) {
    moodholder[0] = mood;
}

U~F getmood() {
    return moodholder[0];
}

U~F makemood(x, y, shx, moodname, isred) {
    import button btn;
    btn.x = x;
    btn.y = y;
    btn.shiftX = shx;
    btn.width = 104;
    btn.background = bdcolor.get();
    btn.color = iscolor.get();
    btn.border = btcolor.get();
    btn.backgroundPressed = btcolor.get();
    btn.colorPressed = bdcolor.get();
    btn.borderPressed = iscolor.get();
    btn.borderWidth = 2;
    btn.text = moodname;
    btn.queue = queue;
    btn.moveToTopWhenPressed = true;
    U~F moodbtnevent() {
        setmood(btn.text);
    }
    btn.signal = moodbtnevent;
    TestWindow.add(btn);
}
makemood(12, 275, 0, `CHUMMY', FALSE);
makemood(12, 295, 0, `PALSY', FALSE);
makemood(12, 315, 0, `CHIPPER', FALSE);
makemood(117, 275, 0, `BULLY', FALSE);
makemood(117, 295, 0, `PEPPY', FALSE);
makemood(117, 315, 0, `RANCOROUS', TRUE);

TestWindow.start();

import dream HalfLength;

~ATH(TestWindow) {
    ~ATH(queue) {
        queue.pull()();
    } EXECUTE(NULL);
    HalfLength.sleep();
} EXECUTE(NULL);

THIS.DIE();
